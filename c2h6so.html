<html>
<head>
<title>ASE atomic visualization</title>
<link rel="stylesheet" type="text/css"
 href="https://www.x3dom.org/x3dom/release/x3dom.css">
</link>
<script type="text/javascript"
 src="https://www.x3dom.org/x3dom/release/x3dom.js">
</script>
<style>
* {
    box-sizing: border-box;
  }
 
/* Create two unequal columns that floats next to each other */
.column {
  float: left;
  padding: 1px;
}

.left {
  width: 20%;
}

.right {
  width: 80%;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

#x3dase{
    top:0;
    width: 80%;
    height: 80%;
    border:2px solid darkorange;        
}

#sidebar{
    top:0;
    border:2px solid darkorange;        
}


/* Sidebar component containers */
.ui-widget-header
{
  background-color: lightblue;
  font-size: 16px;

}
.sidebarComponent
{
    padding:2px 2px 2px 2px;
    font-size: medium;
}

.button {
  background-color: #4CAF50; /* Green */
  border: 1px solid green;
  color: white;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  cursor: pointer;
  /* float: left; */
}

</style></head>
<body>
<div class = "column left", id = "sidebar">

    <div class="ui-widget-header">Model</div>
    <div class="sidebarComponent">
        <form style="text-align:left;">
            <button type="button" class = "button" onclick="spacefilling('bba6df9b')">Ball</button>
            <button type="button" class = "button" onclick="ballstick('bba6df9b')">Ball-and-stick</button>
            <button type="button" class = "button" onclick="polyhedra('bba6df9b')">Polyhedra</button>
        </form>
    </div>
    <div class="ui-widget-header">Label</div>
    <div class="sidebarComponent">
        <form style="text-align:left;">
            <button type="button" class = "button" onclick="none('bba6df9b')">None</button>
            <button type="button" class = "button" onclick="element('bba6df9b')"> Element</button>
            <button type="button" class = "button" onclick="index('bba6df9b')">Index</button>
        </form>
    </div>

    <div class="ui-widget-header">Camera</div>
    <div class="sidebarComponent">
        <form style="text-align:left;">
            <button type="button" class = "button" onclick="document.getElementById('camera_ortho_bba6df9b').setAttribute('set_bind','true');">Orthographic</button>
            <button type="button" class = "button" onclick="document.getElementById('camera_persp_bba6df9b').setAttribute('set_bind','true');">Perspective</button>
        </form>
    </div>

    <div class="ui-widget-header">View</div>
    <div class="sidebarComponent">
        <form style="text-align:left;">
            <button type="button" class = "button" onclick="set_viewpoint('bba6df9b', 'top_pos', 'top_ori')">Top</button>
            <button type="button" class = "button" onclick="set_viewpoint('bba6df9b', 'front_pos', 'front_ori')">Front</button>
            <button type="button" class = "button" onclick="set_viewpoint('bba6df9b', 'right_pos', 'right_ori')">Right</button>
        </form>
    </div>

    <div class="ui-widget-header">Measurement</div>
    <div class="sidebarComponent">
        <form style="text-align:left; font-size: 10px;">
            <table style="font-size:1.0em;">
                <td id="lastonMouseoverObject_kind_bba6df9b">-</td> <td id="lastonMouseoverObject_index_bba6df9b">-</td> 
                <td id="position_bba6df9b">-</td></tr>
            </table>
            <p id="measure_bba6df9b"></p>
            <p id="error_bba6df9b"></p>
        </form>
    </div>

</div>

<script>
    document.onkeyup = function(e) {
      var x = event.which || event.keyCode;
      var label = 0;
        if (x == 49) {
            set_viewpoint('bba6df9b', 'top_pos', 'top_ori');
        } else if (x == 50) {
            set_viewpoint('bba6df9b', 'front_pos', 'front_ori');
        } else if (x == 51) {
            set_viewpoint('bba6df9b', 'right_pos', 'right_ori');
        } else if (x == 83) {
          spacefilling('bba6df9b');
        } else if (x == 66) {
          ballstick('bba6df9b');
        } else if (x == 80) {
          polyhedra('bba6df9b');
        } else if (x == 52) {
            element('bba6df9b');
        } else if (x == 53) {
            index('bba6df9b');
        } else if (x == 54) {
            none('bba6df9b');
        }
      };
    </script> <div class = "column right" > 
   <X3D id = "x3dase" PrimitiveQuality = "high" > 
     <Scene > 
       <Transform id = "t_camera_persp_bba6df9b" rotation = "0 0 0 0" > 
         <Viewpoint id = "camera_persp_bba6df9b" position = "9.255462120611839e-07 0.07620486989466144 13.653110402219408" centerOfRotation = "9.255462120611839e-07 0.07620486989466144 -0.023286597780593665" orientation = "0 0 0 0" description = "camera" > 
         </Viewpoint> 
       </Transform> 
       <Transform id = "t_camera_ortho_bba6df9b" rotation = "0 0 0 0" > 
         <OrthoViewpoint id = "camera_ortho_bba6df9b" position = "9.255462120611839e-07 0.07620486989466144 13.653110402219408" centerOfRotation = "9.255462120611839e-07 0.07620486989466144 -0.023286597780593665" orientation = "0 0 0 0" fieldOfView = "-4.5587990000000005 -4.5587990000000005 4.5587990000000005 4.5587990000000005" description = "camera" > 
         </OrthoViewpoint> 
       </Transform> 
       <Group onclick = "handleGroupClick(event, 'bba6df9b')" > 
         <Switch whichChoice = "-1" > 
           <Shape DEF = "as_C" id = "as_C_bba6df9b" > 
             <Appearance DEF = "app_C" > 
               <Material name = "am_bba6df9b" diffuseColor = "0.565 0.565 0.565" transparency = "0.01" > 
               </Material> 
             </Appearance> 
             <Sphere DEF = "asp_C" radius = "0.76" > 
             </Sphere> 
           </Shape> 
         </Switch> 
         <Transform DEF = "at_2_bba6df9b" uuid = "bba6df9b" id = "at_2_bba6df9b" radius = "0.76" name = "at_bba6df9b" translation = "1.34 -0.81 0.18" scale = "1 1 1" > 
           <Shape kind = "C" index = "2" uuid = "bba6df9b" > 
             <Appearance USE = "app_C" > 
             </Appearance> 
             <Sphere USE = "asp_C" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Transform DEF = "at_3_bba6df9b" uuid = "bba6df9b" id = "at_3_bba6df9b" radius = "0.76" name = "at_bba6df9b" translation = "-1.34 -0.81 0.18" scale = "1 1 1" > 
           <Shape kind = "C" index = "3" uuid = "bba6df9b" > 
             <Appearance USE = "app_C" > 
             </Appearance> 
             <Sphere USE = "asp_C" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Switch whichChoice = "-1" > 
           <Shape DEF = "as_O" id = "as_O_bba6df9b" > 
             <Appearance DEF = "app_O" > 
               <Material name = "am_bba6df9b" diffuseColor = "1.0 0.051 0.051" transparency = "0.01" > 
               </Material> 
             </Appearance> 
             <Sphere DEF = "asp_O" radius = "0.66" > 
             </Sphere> 
           </Shape> 
         </Switch> 
         <Transform DEF = "at_1_bba6df9b" uuid = "bba6df9b" id = "at_1_bba6df9b" radius = "0.66" name = "at_bba6df9b" translation = "0.0 1.5 0.38" scale = "1 1 1" > 
           <Shape kind = "O" index = "1" uuid = "bba6df9b" > 
             <Appearance USE = "app_O" > 
             </Appearance> 
             <Sphere USE = "asp_O" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Switch whichChoice = "-1" > 
           <Shape DEF = "as_H" id = "as_H_bba6df9b" > 
             <Appearance DEF = "app_H" > 
               <Material name = "am_bba6df9b" diffuseColor = "1.0 1.0 1.0" transparency = "0.01" > 
               </Material> 
             </Appearance> 
             <Sphere DEF = "asp_H" radius = "0.31" > 
             </Sphere> 
           </Shape> 
         </Switch> 
         <Transform DEF = "at_4_bba6df9b" uuid = "bba6df9b" id = "at_4_bba6df9b" radius = "0.31" name = "at_bba6df9b" translation = "1.26 -0.9 1.27" scale = "1 1 1" > 
           <Shape kind = "H" index = "4" uuid = "bba6df9b" > 
             <Appearance USE = "app_H" > 
             </Appearance> 
             <Sphere USE = "asp_H" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Transform DEF = "at_5_bba6df9b" uuid = "bba6df9b" id = "at_5_bba6df9b" radius = "0.31" name = "at_bba6df9b" translation = "-2.28 -0.31 -0.07" scale = "1 1 1" > 
           <Shape kind = "H" index = "5" uuid = "bba6df9b" > 
             <Appearance USE = "app_H" > 
             </Appearance> 
             <Sphere USE = "asp_H" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Transform DEF = "at_6_bba6df9b" uuid = "bba6df9b" id = "at_6_bba6df9b" radius = "0.31" name = "at_bba6df9b" translation = "1.3 -1.79 -0.29" scale = "1 1 1" > 
           <Shape kind = "H" index = "6" uuid = "bba6df9b" > 
             <Appearance USE = "app_H" > 
             </Appearance> 
             <Sphere USE = "asp_H" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Transform DEF = "at_7_bba6df9b" uuid = "bba6df9b" id = "at_7_bba6df9b" radius = "0.31" name = "at_bba6df9b" translation = "2.28 -0.31 -0.07" scale = "1 1 1" > 
           <Shape kind = "H" index = "7" uuid = "bba6df9b" > 
             <Appearance USE = "app_H" > 
             </Appearance> 
             <Sphere USE = "asp_H" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Transform DEF = "at_8_bba6df9b" uuid = "bba6df9b" id = "at_8_bba6df9b" radius = "0.31" name = "at_bba6df9b" translation = "-1.3 -1.79 -0.29" scale = "1 1 1" > 
           <Shape kind = "H" index = "8" uuid = "bba6df9b" > 
             <Appearance USE = "app_H" > 
             </Appearance> 
             <Sphere USE = "asp_H" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Transform DEF = "at_9_bba6df9b" uuid = "bba6df9b" id = "at_9_bba6df9b" radius = "0.31" name = "at_bba6df9b" translation = "-1.26 -0.9 1.27" scale = "1 1 1" > 
           <Shape kind = "H" index = "9" uuid = "bba6df9b" > 
             <Appearance USE = "app_H" > 
             </Appearance> 
             <Sphere USE = "asp_H" > 
             </Sphere> 
           </Shape> 
         </Transform> 
         <Switch whichChoice = "-1" > 
           <Shape DEF = "as_S" id = "as_S_bba6df9b" > 
             <Appearance DEF = "app_S" > 
               <Material name = "am_bba6df9b" diffuseColor = "1.0 1.0 0.188" transparency = "0.01" > 
               </Material> 
             </Appearance> 
             <Sphere DEF = "asp_S" radius = "1.05" > 
             </Sphere> 
           </Shape> 
         </Switch> 
         <Transform DEF = "at_0_bba6df9b" uuid = "bba6df9b" id = "at_0_bba6df9b" radius = "1.05" name = "at_bba6df9b" translation = "0.0 0.23 -0.44" scale = "1 1 1" > 
           <Shape kind = "S" index = "0" uuid = "bba6df9b" > 
             <Appearance USE = "app_S" > 
             </Appearance> 
             <Sphere USE = "asp_S" > 
             </Sphere> 
           </Shape> 
         </Transform> 
       </Group> 
       <Switch whichChoice = "-1" > 
         <Shape DEF = "C" > 
           <Appearance > 
             <Material diffuseColor = "0.565 0.565 0.565" transparency = "0.01" > 
             </Material> 
           </Appearance> 
           <Cylinder height = "1.0" radius = "0.1" subdivision = "8" > 
           </Cylinder> 
         </Shape> 
       </Switch> 
       <Switch whichChoice = "-1" > 
         <Shape DEF = "O" > 
           <Appearance > 
             <Material diffuseColor = "1.0 0.051 0.051" transparency = "0.01" > 
             </Material> 
           </Appearance> 
           <Cylinder height = "1.0" radius = "0.1" subdivision = "8" > 
           </Cylinder> 
         </Shape> 
       </Switch> 
       <Switch whichChoice = "-1" > 
         <Shape DEF = "H" > 
           <Appearance > 
             <Material diffuseColor = "1.0 1.0 1.0" transparency = "0.01" > 
             </Material> 
           </Appearance> 
           <Cylinder height = "1.0" radius = "0.1" subdivision = "8" > 
           </Cylinder> 
         </Shape> 
       </Switch> 
       <Switch whichChoice = "-1" > 
         <Shape DEF = "S" > 
           <Appearance > 
             <Material diffuseColor = "1.0 1.0 0.188" transparency = "0.01" > 
             </Material> 
           </Appearance> 
           <Cylinder height = "1.0" radius = "0.1" subdivision = "8" > 
           </Cylinder> 
         </Shape> 
       </Switch> 
       <Switch id = "bs_bba6df9b" whichChoice = "-1" > 
         <Group > 
           <Transform translation = "1.57 -0.69 0.12" scale = "1 0.55 1" rotation = "0.2565 -0.0 0.9666 2.0417" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "1.33 -1.06 0.06" scale = "1 0.55 1" rotation = "0.9973 -0.0 -0.074 0.4493" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "1.32 -0.83 0.45" scale = "1 0.55 1" rotation = "-0.997 0.0 -0.0768 1.4908" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "1.0 -0.55 0.03" scale = "1 0.9 1" rotation = "0.4197 0.0 -0.9077 2.1851" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-1.32 -0.83 0.45" scale = "1 0.55 1" rotation = "-0.997 0.0 0.0768 1.4908" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-1.33 -1.06 0.06" scale = "1 0.55 1" rotation = "0.9973 -0.0 0.074 0.4493" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-1.57 -0.69 0.12" scale = "1 0.55 1" rotation = "0.2565 0.0 -0.9666 2.0417" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-1.0 -0.55 0.03" scale = "1 0.9 1" rotation = "0.4197 -0.0 0.9077 2.185" > 
             <Shape USE = "C" > 
             </Shape> 
           </Transform> 
           <Transform translation = "0.0 1.18 0.18" scale = "1 0.75 1" rotation = "1.0 -0.0 -0.0 0.5729" > 
             <Shape USE = "O" > 
             </Shape> 
           </Transform> 
           <Transform translation = "1.28 -0.87 1.0" scale = "1 0.55 1" rotation = "0.997 -0.0 0.0768 1.6508" > 
             <Shape USE = "H" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-2.04 -0.44 -0.01" scale = "1 0.55 1" rotation = "-0.2565 -0.0 0.9666 1.0999" > 
             <Shape USE = "H" > 
             </Shape> 
           </Transform> 
           <Transform translation = "1.31 -1.55 -0.17" scale = "1 0.55 1" rotation = "-0.9973 0.0 0.074 2.6923" > 
             <Shape USE = "H" > 
             </Shape> 
           </Transform> 
           <Transform translation = "2.04 -0.44 -0.01" scale = "1 0.55 1" rotation = "-0.2565 0.0 -0.9666 1.0999" > 
             <Shape USE = "H" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-1.31 -1.55 -0.17" scale = "1 0.55 1" rotation = "-0.9973 0.0 -0.074 2.6923" > 
             <Shape USE = "H" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-1.28 -0.87 1.0" scale = "1 0.55 1" rotation = "0.997 -0.0 -0.0768 1.6508" > 
             <Shape USE = "H" > 
             </Shape> 
           </Transform> 
           <Transform translation = "0.0 0.55 -0.23" scale = "1 0.75 1" rotation = "-1.0 0.0 0.0 2.5687" > 
             <Shape USE = "S" > 
             </Shape> 
           </Transform> 
           <Transform translation = "0.33 -0.03 -0.28" scale = "1 0.9 1" rotation = "-0.4197 -0.0 0.9077 0.9565" > 
             <Shape USE = "S" > 
             </Shape> 
           </Transform> 
           <Transform translation = "-0.33 -0.03 -0.28" scale = "1 0.9 1" rotation = "-0.4197 0.0 -0.9077 0.9565" > 
             <Shape USE = "S" > 
             </Shape> 
           </Transform> 
         </Group> 
       </Switch> 
       <Switch id = "switch_marker_0_bba6df9b" whichChoice = "-1" > 
         <Transform id = "marker_0_bba6df9b" scale = ".1 .1 .1" translation = "5 0 0" > 
           <Shape isPickable = "False" > 
             <Appearance > 
               <Material diffuseColor = "#FFD966" transparency = "0.5" > 
               </Material> 
             </Appearance> 
             <Sphere radius = "1.0" > 
             </Sphere> 
           </Shape> 
         </Transform> 
       </Switch> 
       <Switch id = "switch_marker_1_bba6df9b" whichChoice = "-1" > 
         <Transform id = "marker_1_bba6df9b" scale = ".1 .1 .1" translation = "5 0 0" > 
           <Shape isPickable = "False" > 
             <Appearance > 
               <Material diffuseColor = "#FFD966" transparency = "0.5" > 
               </Material> 
             </Appearance> 
             <Sphere radius = "1.0" > 
             </Sphere> 
           </Shape> 
         </Transform> 
       </Switch> 
       <Switch id = "switch_marker_2_bba6df9b" whichChoice = "-1" > 
         <Transform id = "marker_2_bba6df9b" scale = ".1 .1 .1" translation = "5 0 0" > 
           <Shape isPickable = "False" > 
             <Appearance > 
               <Material diffuseColor = "#FFD966" transparency = "0.5" > 
               </Material> 
             </Appearance> 
             <Sphere radius = "1.0" > 
             </Sphere> 
           </Shape> 
         </Transform> 
       </Switch> 
       <Switch id = "switch_marker_3_bba6df9b" whichChoice = "-1" > 
         <Transform id = "marker_3_bba6df9b" scale = ".1 .1 .1" translation = "5 0 0" > 
           <Shape isPickable = "False" > 
             <Appearance > 
               <Material diffuseColor = "#FFD966" transparency = "0.5" > 
               </Material> 
             </Appearance> 
             <Sphere radius = "1.0" > 
             </Sphere> 
           </Shape> 
         </Transform> 
       </Switch> 
       <Switch id = "switch_marker_4_bba6df9b" whichChoice = "-1" > 
         <Transform id = "marker_4_bba6df9b" scale = ".1 .1 .1" translation = "5 0 0" > 
           <Shape isPickable = "False" > 
             <Appearance > 
               <Material diffuseColor = "#FFD966" transparency = "0.5" > 
               </Material> 
             </Appearance> 
             <Sphere radius = "1.0" > 
             </Sphere> 
           </Shape> 
         </Transform> 
       </Switch> 
       <Switch id = "switch_line_0_bba6df9b" whichChoice = "-1" > 
         <Shape > 
           <IndexedLineSet id = "line_ind_0_bba6df9b" solid = "false" coordIndex = "0 1 -1" > 
             <Coordinate id = "line_coor_0_bba6df9b" point = "0 0 0 0 0 1" > 
             </Coordinate> 
           </IndexedLineSet> 
           <Appearance > 
             <Material diffuseColor = "0 0 0" emissiveColor = "0 0.5 1" > 
             </Material> 
           </Appearance> 
         </Shape> 
       </Switch> 
       <Switch id = "switch_line_1_bba6df9b" whichChoice = "-1" > 
         <Shape > 
           <IndexedLineSet id = "line_ind_1_bba6df9b" solid = "false" coordIndex = "0 1 -1" > 
             <Coordinate id = "line_coor_1_bba6df9b" point = "0 0 0 0 0 1" > 
             </Coordinate> 
           </IndexedLineSet> 
           <Appearance > 
             <Material diffuseColor = "0 0 0" emissiveColor = "0 0.5 1" > 
             </Material> 
           </Appearance> 
         </Shape> 
       </Switch> 
     </Scene> 
   </X3D> 
 </div> 

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.0.min.js" ></script>
 <script >
 if (atoms_dict == undefined) {var atoms_dict = {"new": true};}; 
atoms_dict["bba6df9b"] = {com: "0.00 0.08 -0.02", 
top_pos: "0.00 0.08 13.65", 
front_pos: "0.00 -13.60 -0.02", 
right_pos: "13.68 0.08 -0.02", 
left_pos: "-13.68 0.08 -0.02", 
top_ori: "0 0 0 0", 
front_ori: "1 0 0 1.57079", 
right_ori: "0 1 0 1.57079", 
left_ori: "0 1 0 -1.57079", 
select: [], 
uuid: "bba6df9b", 
label: "False", 
bond: "1.0", 
polyhedra: {}, 
};

// if (atoms_dict[uuid]['new']){
function setQuality(uuid, quality){
        // $('#error_'.concat(atoms_dict[uuid]['uuid'])).html('uuid: '.concat(atoms_dict[uuid]["uuid"]));
        var x3d = 'x3dase_' + uuid;
        document.getElementById(x3d).setAttribute('PrimitiveQuality', quality);
    }
function set_viewpoint(uuid, pos, ori){
    // $('#error_'.concat(atoms_dict[uuid]['uuid'])).html('uuid: '.concat(atoms_dict[uuid]["uuid"]));
    var persp = 'camera_persp_' + uuid;
    var ortho = 'camera_ortho_' + uuid;
    document.getElementById(persp).setAttribute('orientation', atoms_dict[uuid][ori]);
    document.getElementById(persp).setAttribute('position', atoms_dict[uuid][pos]);
    document.getElementById(ortho).setAttribute('orientation', atoms_dict[uuid][ori]);
    document.getElementById(ortho).setAttribute('position', atoms_dict[uuid][pos]);
}

//Round a float value to x.xx format
function roundWithTwoDecimals(value)
{
    var x = (Math.round(value * 100)) / 100;
    var y = x.toFixed(2);
    return y;
}
//Handle click on any group member
function handleGroupClick(event)
{
    //Mark hitting point
    var target = event.target;
    var uuid = target.parentNode.getAttribute('uuid')
    var radius = target.parentNode.getAttribute('radius');
    var scale = target.parentNode.getAttribute('scale');
    scale = parseFloat(radius)*parseFloat(scale)*1.2;
    var scale = ' ' + scale + ' ' + scale + ' ' + scale;
    var translation = target.parentNode.getAttribute('translation');
    var id = target.parentNode.getAttribute('id');
    if (window.event.ctrlKey) {
        atoms_dict[uuid]['select'].push(id);

    }
    else {
        for (var i=1; i<= atoms_dict[uuid]['select'].length; i++) {
            $('#switch_marker_' + i + '_' + uuid).attr('whichChoice', -1);
        }
        atoms_dict[uuid]['select'] = [];
        atoms_dict[uuid]['select'].push(id);
        $('#switch_marker_' + 2 + '_' + uuid).attr('whichChoice', -1);
}
    var n = atoms_dict[uuid]['select'].length;
    $('#switch_marker_' + n + '_' + uuid).attr('whichChoice', 0);
    $('#marker_' + n + '_' + uuid).attr('translation', translation);
    $('#marker_' + n + '_' + uuid).attr('scale', scale);
    var atom_kind = '#lastonMouseoverObject_kind_'.concat(uuid);
    var atom_index = '#lastonMouseoverObject_index_'.concat(uuid);
    $(atom_kind).html(target.getAttribute("kind"));
    $(atom_index).html(target.getAttribute("index"));
    //
    var coord = translation.split(" ")
    var atom_position = '#position_'.concat(uuid);
    var x = roundWithTwoDecimals(coord[0]);
    var y = roundWithTwoDecimals(coord[1]);
    var z = roundWithTwoDecimals(coord[2]);
    var position = 'x = ' + x + ' y = ' + y + ' z = ' + z;
    $(atom_position).html(position);

    if (atoms_dict[uuid]['select'].length == 2){
        calculate_distance(uuid);
        draw_line(uuid);
    }
    else if (atoms_dict[uuid]['select'].length == 3){
        calculate_angle(uuid);
        draw_line(uuid);
    }

    console.log(event);
}
//Add a onMouseover callback to every shape
$(document).ready(function(){
    $("shape").each(function() {
        // $(this).attr("onMouseover", "handleOnMouseover_shape(this)");
        // $(this).attr("onclick", "handleClick_shape(this)");
    });
    //Add a onMouseover callback to every transform
    $("transform").each(function() {
        // $(this).attr("onMouseover", "handleOnMouseover_transform(this)");
        // $(this).attr("onclick", "handleClick_transform(this)");
    });
});
$(document).on("click", function(e) {
    if (e.target === document || e.target.tagName === "BODY" || e.target.tagName === "HTML") {
        $('#marker').attr('scale', "0.0001 0.0001 0.0001");
    }
});
//Handle onMouseover on a shape
function handleOnMouseover_shape(shape)
{
    var atom_kind = '#lastonMouseoverObject_kind_'.concat($(shape).attr("uuid"));
    var atom_index = '#lastonMouseoverObject_index_'.concat($(shape).attr("uuid"));
    $(atom_kind).html($(shape).attr("kind"));
    $(atom_index).html($(shape).attr("index"));
}
//Handle onMouseover on a shape
function handleClick_shape(shape)
{
    var atom_kind = '#lastonMouseoverObject_kind_'.concat($(shape).attr("uuid"));
    var atom_index = '#lastonMouseoverObject_index_'.concat($(shape).attr("uuid"));
    $(atom_kind).html($(shape).attr("kind"));
    $(atom_index).html($(shape).attr("index"));
}
//Handle onMouseover on a transform
function handleOnMouseover_transform(transform)
{
    var atom_position = '#position_'.concat($(transform).attr("uuid"));
    var coord = $(transform).attr("translation").split(" "[0]);
    var x = roundWithTwoDecimals(coord[0]);
    var y = roundWithTwoDecimals(coord[1]);
    var z = roundWithTwoDecimals(coord[2]);
    var position = 'x = ' + x + ' y = ' + y + ' z = ' + z;
    $(atom_position).html(position);
}

function calculate_distance(uuid)
{
    var measure = '#measure_'.concat(uuid);
    var c1 = document.getElementById(atoms_dict[uuid]['select'][0]).getAttribute("translation").split(" ");
    var c2 = document.getElementById(atoms_dict[uuid]['select'][1]).getAttribute("translation").split(" ");
    r = (c1[0] - c2[0])*(c1[0] - c2[0]) + (c1[1] - c2[1])*(c1[1] - c2[1]) + (c1[2] - c2[2])*(c1[2] - c2[2]);
    r = roundWithTwoDecimals(Math.sqrt(r));
    var dist = 'Distance:  ' + r;
    $(measure).html(dist);
}
function calculate_angle(uuid)
{
    var measure = '#measure_'.concat(uuid);
    var c1 = document.getElementById(atoms_dict[uuid]['select'][0]).getAttribute("translation").split(" ");
    var c2 = document.getElementById(atoms_dict[uuid]['select'][1]).getAttribute("translation").split(" ");
    var c3 = document.getElementById(atoms_dict[uuid]['select'][2]).getAttribute("translation").split(" ");
    var AB = Math.sqrt(Math.pow(c2[0]-c1[0],2)+ Math.pow(c2[1]-c1[1],2) + Math.pow(c2[2]-c1[2],2));    
    var BC = Math.sqrt(Math.pow(c2[0]-c3[0],2)+ Math.pow(c2[1]-c3[1],2) + Math.pow(c2[2]-c3[2],2)); 
    var AC = Math.sqrt(Math.pow(c3[0]-c1[0],2)+ Math.pow(c3[1]-c1[1],2)+ Math.pow(c3[2]-c1[2],2));
    var angle = roundWithTwoDecimals(Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB))*180/3.1415926);
    var angle = 'angle:  ' + angle;
    $(measure).html(angle);
}
function draw_line(uuid)
{
    var n = atoms_dict[uuid]['select'].length;
    var coordIndex = '';
    var point = document.getElementById(atoms_dict[uuid]['select'][0]).getAttribute("translation");
    for (var i = 1; i < n; i++) {
        var c1 = document.getElementById(atoms_dict[uuid]['select'][i]).getAttribute("translation");
        coordIndex = coordIndex + (i-1) + ' ' + i + ' -1 ';
        point = point + ' ' + c1 + ' ';
    }
    $('#line_coor_' + 0 + '_' + uuid).attr('point', point);
    $('#line_ind_' + 0 + '_' + uuid).attr('coordIndex', coordIndex);
    $('#switch_line_' + 0 + '_' + uuid).attr('whichChoice', 0);
}
//Handle models
function spacefilling(uuid)
{
    var objs = document.getElementsByName(''.concat('at_'.concat(uuid)));
    var max=objs.length;
    for (var i=0; i< max; i++) {
        objs[i].setAttribute("scale", "1.0, 1.0, 1.0");
        }
    document.getElementById('bs_'.concat(uuid)).setAttribute("whichChoice", '-1');
    document.getElementById('ps_'.concat(uuid)).setAttribute("whichChoice", '-1');
}
function ballstick(uuid)
{
    if (atoms_dict[uuid]['bond']=='False'){ 
        alert('Please set bond parameter in your code, e.g. bond=1.0!');
        $('#error_'.concat(uuid)).html('(^_^) Please set bond parameter in your code, e.g. bond=1.0!');
		return ;
    }
    var objs = document.getElementsByName(''.concat('at_'.concat(uuid)));
    var max=objs.length;
    for (var i=0; i< max; i++) {
        objs[i].setAttribute("scale", "0.6, 0.6, 0.6");
        }
    document.getElementById('bs_'.concat(uuid)).setAttribute("whichChoice", '0');
    document.getElementById('ps_'.concat(uuid)).setAttribute("whichChoice", '-1');
}
function polyhedra(uuid)
{
    if (atoms_dict[uuid]['polyhedra'].length==0){ 
        alert('Please set polyhedra parameter in your code, e.g. polyhedra={"Ti": ["O"]}!');
        $('#error_'.concat(uuid)).html('(^_^) Please set polyhedra parameter in your code, e.g. polyhedra={"Ti": ["O"]}!');
		return ;
    }
    var objs = document.getElementsByName(''.concat('at_'.concat(uuid)));
    var max=objs.length;
    for (var i=0; i< max; i++) {
        objs[i].setAttribute("scale", "0.6, 0.6, 0.6");
        }
    document.getElementById('bs_'.concat(uuid)).setAttribute("whichChoice", '0');
    document.getElementById('ps_'.concat(uuid)).setAttribute("whichChoice", '0');
}
function none(uuid)
{
    var objs = document.getElementsByName(''.concat('am_'.concat(uuid)));
    var max=objs.length;
    for (var i=0; i< max; i++) {
        objs[i].setAttribute("transparency", "0.0");
        }
    document.getElementById('ele_'.concat(uuid)).setAttribute("whichChoice", '-1');
    document.getElementById('ind_'.concat(uuid)).setAttribute("whichChoice", '-1');
}
        
function element(uuid)
{
    if (atoms_dict[uuid]['label']=='False'){ 
        alert('To show element, please set label=True in your code!');
        $('#error_'.concat(uuid)).html('(^_^) To show element, please set label=True in your code!');
		return ;
	}
    var objs = document.getElementsByName(''.concat('am_'.concat(uuid)));
    var max=objs.length;
    for (var i=0; i< max; i++) {
        objs[i].setAttribute("transparency", "0.4");
        }
    document.getElementById('ele_'.concat(uuid)).setAttribute("whichChoice", '0');
    document.getElementById('ind_'.concat(uuid)).setAttribute("whichChoice", '-1');
    document.getElementById('bs_'.concat(uuid)).setAttribute("whichChoice", '-1');
}
function index(uuid)
{
    if (atoms_dict[uuid]['label']=='False'){ 
        alert('To show index, please set label=True in your code!');
        $('#error_'.concat(uuid)).html('(^_^) To show index, please set label=True in your code!');
		return ;
	}
    var objs = document.getElementsByName(''.concat('am_'.concat(uuid)));
    var max=objs.length;
    for (var i=0; i< max; i++) {
        objs[i].setAttribute("transparency", "0.4");
        }
    document.getElementById('ind_'.concat(uuid)).setAttribute("whichChoice", '0');
    document.getElementById('ele_'.concat(uuid)).setAttribute("whichChoice", '-1');
    document.getElementById('bs_'.concat(uuid)).setAttribute("whichChoice", '-1');
}
// } 
</script> </body>
</html>
